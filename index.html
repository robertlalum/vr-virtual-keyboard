    <a-plane rotation="-90 0 0" width="10" height="10" color="#0b0b0b" position="0 0 -2"></a-plane>
  </a-scene>

  <script>
    // Keyboard layout
    const layout = [
      ['1','2','3','4','5','6','7','8','9','0'],
      ['Q','W','E','R','T','Y','U','I','O','P'],
      ['A','S','D','F','G','H','J','K','L'],
      ['Z','X','C','V','B','N','M','Back'],
      ['Space','Enter','.','!','?']
    ];

    let buffer = '';
    const textEntity = document.getElementById('typedText');
    const cursor = document.getElementById('cursorBlink');

    function updateScreen() {
      textEntity.setAttribute('text', `value: ${buffer}; color:#fff; width:1.5; align:left; anchor:left; baseline:top; wrapCount:40;`);
      updateCursor();
    }

    function updateCursor() {
      // Compute cursor position based on buffer
      const lines = buffer.split("\n");
      const currentLine = lines[lines.length - 1];
      const charIndex = currentLine.length;
      const charWidth = 0.036; // width per character in VR units
      const lineHeight = 0.065; // vertical space per line
      const startX = -0.75; // same as typedText x
      const startY = 0.25;  // same as typedText y
      const x = startX + charIndex * charWidth;
      const y = startY - (lines.length - 1) * lineHeight;
      cursor.setAttribute('position', `${x} ${y} 0.02`);
    }

    function handleKey(k) {
      if(k==='Back') buffer = buffer.slice(0,-1);
      else if(k==='Space') buffer += ' ';
      else if(k==='Enter') buffer += '\n';
      else buffer += k;
      updateScreen();
    }

    function createKeyboard() {
      const parent = document.getElementById('keyboard');
      const keyW = 0.14, keyH = 0.12, rowGap = 0.015;
      layout.forEach((row, i) => {
        let x = -0.7;
        let y = -i * (keyH + rowGap);
        row.forEach(k => {
          const el = document.createElement('a-entity');
          const w = (k === 'Space') ? 0.8 : (k === 'Enter') ? 0.2 : 0.14;
          el.setAttribute('geometry', `primitive: plane; width:${w}; height:${keyH}`);
          el.setAttribute('material', 'color:#333; shader:flat');
          el.setAttribute('position', `${x + w/2} ${y} 0`);
          el.setAttribute('class', 'key');

          // Label
          const label = document.createElement('a-entity');
          label.setAttribute('text', `value:${k}; align:center; color:#fff; width:2`);
          label.setAttribute('position','0 0 0.01');
          el.appendChild(label);

          // Click behavior
          el.addEventListener('click', () => {
            handleKey(k);
            el.setAttribute('scale', '0.9 0.9 0.9');
            setTimeout(()=>el.setAttribute('scale','1 1 1'),100);
          });

          parent.appendChild(el);
          x += w + 0.015;
        });
      });
    }

    // Grip drag toggle (for pointer)
    let dragging = false;
    const rightHand = document.getElementById('rightHand');
    const leftHand = document.getElementById('leftHand');
    [rightHand,leftHand].forEach(handEl => {
      handEl.addEventListener('gripdown', ()=>dragging=true);
      handEl.addEventListener('gripup', ()=>dragging=false);
    });

    // Initialize keyboard and cursor
    setTimeout(()=>{ createKeyboard(); updateScreen(); },500);

    // Cursor blink
    setInterval(()=>{ cursor.setAttribute('visible', !cursor.getAttribute('visible')); },500);
  </script>
</body>
</html>

    
